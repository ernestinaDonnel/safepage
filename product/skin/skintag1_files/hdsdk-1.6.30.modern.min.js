!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).HdSdk={})}(this,(function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,n)};var n,r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function i(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function a(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function s(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||t)}var c=new Uint8Array(16);function u(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(c)}var d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function l(e){return"string"==typeof e&&d.test(e)}for(var p=[],f=0;f<256;++f)p.push((f+256).toString(16).substr(1));function v(e,t,n){var r=(e=e||{}).random||(e.rng||u)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(p[e[t+0]]+p[e[t+1]]+p[e[t+2]]+p[e[t+3]]+"-"+p[e[t+4]]+p[e[t+5]]+"-"+p[e[t+6]]+p[e[t+7]]+"-"+p[e[t+8]]+p[e[t+9]]+"-"+p[e[t+10]]+p[e[t+11]]+p[e[t+12]]+p[e[t+13]]+p[e[t+14]]+p[e[t+15]]).toLowerCase();if(!l(n))throw TypeError("Stringified UUID is invalid");return n}(r)}var h={view:"101",click:"102",input:"103",success:"104",loading:"105",heartbeat:"106",check:"107",view_success:"108",hover:"109",exit:"999"},m={event_name:{view:"101",additem:"102",updateitem:"103",removeitem:"104",checkout:"105",recommenditem:"106",proceed_to_checkout:"107",place_order:"108",click_component:"109",product_view:"110",product_share:"111",buy_now:"112",select_product:"113",deselect_product:"114",menu_view:"115",menu_click:"116",catalog_view:"117",catalog_click:"118",sku_click:"119",component_view:"120",display_click:"121",sort_click:"122",select_bundling:"123",add_wishlist:"124",cancel_wishlist:"125",proceed_to_delivery_payment:"126",proceed_to_pay:"127",proceed_to_delivery:"128",quick_payment:"129",click_product:"130",search_suggest:"131",paypal:"132",input:"133",modify:"134",select_shipping:"135",select_payment:"136",inventory_shortage:"137",login_success:"138",view_cart:"139",leave:"999"},event_category:{order:"101",cart:"102",email:"103",expresscheckoutpage:"104"},product_type:{product:"101",addon:"102",subscription:"103"},status:{soldout:"101",selling:"102"},purchase_source:{common_store:"101",one_page_store:"102"},page:{homepage:"101",pdp:"102",cart:"103",order_check_out:"104",transaction:"105",product_search:"106",product_list:"107",user_page:"108",email:"109",expresscheckout:"110","404page":"111",call_to_action:"112",consumer_home:"113",onepage_checkout:"114",address_confirm:"115",delivery_payment_confirm:"116",delivery_confirm:"117",payment_confirm:"118",addon:"119",other:"120",landing_page:"121"},general_component:{catalog:"101",logo:"102",search:"103",sign_in_bottom:"104",message:"105",cart:"106",store_language:"107",currency:"108",search_product:"109",H1:"110",paragraph:"111",single_image:"112",slider:"113",poster:"114",gallery:"115",media_lr:"116",media_ud:"117",end_payment:"118",end_email:"119",end_fb:"120",end_ins:"121",end_twitter:"122",end_snapchat:"123",end_pinterest:"124",end_line:"125",theme:"126",free_layout:"127",search_pop:"128",search_bar:"129"},custom_component:{sign_up_tab:"101",sign_in_tab:"102",line_signin:"103",fb_signin:"104",sign_in_105:"105",sign_up:"106",title_component:"107",content_component:"108",productmoduel_component:"109",productlist_component:"110",QRcode_component:"111",ins_component:"112",googlemap_component:"113",facebook_component:"114",video_component:"115",pic_component:"116",product_menu:"117",pre_order:"118",gotoamazon:"119",wishlist:"120",product_descri:"121",deliver_payment:"122",score:"123",reviews:"123",share:"124",recommendation:"125",checkout:"126",removement:"127",sign_in_128:"128",proceed_to_checkout:"129",select_all:"130",deselect_all:"131",select:"132",deselect:"133",product_edit:"134",subscribe_line:"135",back_to_cart:"136",place_order:"137",buy_now:"138",view_more:"139",play_video:"140",more_bundling:"141",rec_turn_page:"142",arrival_notice:"143",more_reviews:"144",consumer_info:"145",message:"146",order:"147",return_order:"148",wishlist_149:"149",wishlist_turn_page:"150",use_coupon:"151",sign_in:"152",subscription:"153",back:"154",continue:"155"},display_iterm:{24:"101",48:"102",72:"103"},sort_by:{newestToOldest:"101",oldestToNewest:"102",priceHighToLow:"103",priceLowToHigh:"104",default:"999"},pro_list_type:{category:"101",all_product:"102",chosen_product:"103"},share_dest:{line:"101",fb:"102",message:"103",link:"104",whatsapp:"105",twitter:"106"},signin_source:{sign_in_bottom:"101",order_edit:"102"},search_type:{user_search:"101",suggest_ai:"102",suggest_search:"103"},input_box:{email:"101",first_name:"102",last_name:"103",country:"104",province:"105",city:"106",district:"107",address1:"108",address2:"108",postcode:"109",phone:"110",same_address:"111",another_address:"112",remark:"113"},object:{info:"101",address:"102",shipping:"103"},isFirst:{yes:"1",no:"0"},loginResult:{success:"1",fail:"0"},action_type:h},g=["general_component","custom_component","status","product_type"],y=["PageView","PageLeave","PageDuration","HeartBeat","View","ViewSuccess","ViewContent","AddToCart","InitiateCheckout","AddCustomerInfo","AddShippingInfo","AddPaymentInfo","Purchase","SearchResults","CompleteRegistration","Search","Lead","Login","SelectContent","RemoveFromCart","ViewItemList"],_=["View","ViewSuccess"];function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){P(i,r,o,a,s,"next",e)}function s(e){P(i,r,o,a,s,"throw",e)}a(void 0)}))}}function A(e,t,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}var j="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function D(e,t){return e(t={exports:{}},t.exports),t.exports}var M=D((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),a=new L(r||[]);return i._invoke=function(e,t,n){var r=l;return function(o,i){if(r===f)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw i;return I()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=d(e,t,n);if("normal"===c.type){if(r=n.done?v:p,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=v,n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",p="suspendedYield",f="executing",v="completed",h={};function m(){}function g(){}function y(){}var _={};_[i]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(R([])));b&&b!==n&&r.call(b,i)&&(_=b);var S=y.prototype=m.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=d(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:I}}function I(){return{value:t,done:!0}}return g.prototype=S.constructor=y,y.constructor=g,g.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},k(T.prototype),T.prototype[a]=function(){return this},e.AsyncIterator=T,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new T(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(S),c(S,s,"Generator"),S[i]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=R,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function V(e){return JSON.parse(JSON.stringify(e))}function U(e){if("object"!==x(e))return e;return function e(t,n){var r=[];if("object"===x(t))return Object.keys(t).forEach((function(o){var i=t[o];"object"===x(i)?r=""!=n?r.concat(e(i,n+"["+o+"]")):r.concat(e(i,o)):void 0!==i&&(""!=n?r.push(n,"[",o,"]","=",encodeURIComponent(i),"&"):r.push(o,"=",encodeURIComponent(i),"&"))})),r}(e,"").slice(0,-1).join("")}var N="application/x-www-form-urlencoded",H=49152,q="The query length cannot exceed ".concat(48,"K"),B={useHttps:!0,useRetry:!0,retryTimes:1,maxRequest:5},F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(this,e),this.configure(t),this.override(n)}return S(e,[{key:"configure",value:function(e){var t,n,r=Object.assign({},this.options,V(e));0<r.retryTimes&&r.retryTimes<4||(r.retryTimes=1),-1!==(null===(t=window.location)||void 0===t||null===(n=t.protocol)||void 0===n?void 0:n.indexOf("https"))&&(r.useHttps=!0),this.options=r}},{key:"merge",value:function(e){this.data=Object.assign({},this.data,e)}},{key:"override",value:function(e){this.data=V(e)}},{key:"use",value:function(e,t){if("function"==typeof t)switch(e){case"url":this.urlInterceptor=t;break;case"request":this.requestInterceptor=t}}},{key:"processTrackingData",value:function(e){var t=Object.assign({},this.data,e),n=this.completeTrackingData(t);return this.pretreateTrackingData(n)}},{key:"encodeTrackingData",value:function(e){return U(this.formatTrackingData(e))}},{key:"completeTrackingData",value:function(e){var t,n,r,o,i,a,s,c={act:"websdkentmaster",time:Math.floor((new Date).getTime()/1e3),domain:null===(t=window)||void 0===t||null===(n=t.location)||void 0===n?void 0:n.hostname,url:null===(r=window)||void 0===r||null===(o=r.location)||void 0===o?void 0:o.href,ua:null===(i=window)||void 0===i||null===(a=i.navigator)||void 0===a?void 0:a.userAgent,ref:null===(s=document)||void 0===s?void 0:s.referrer,data_id:v(),request_time:Date.now()};return Object.assign({},c,e)}},{key:"formatMoreInfoData",value:function(e){var t,n={language:null===(t=window)||void 0===t?void 0:t.navigator.language,is_mobile:this.getIsMobile()};return Object.assign({},n,e)}},{key:"getMobile",value:function(){var e,t=null===(e=window)||void 0===e?void 0:e.navigator.userAgent,n=!t.match(/(iPad).*OS\s([\d_]+)/)&&t.match(/(iPhone\sOS)\s([\d_]+)/),r=t.match(/(Android)\s+([\d.]+)/);return n||r}},{key:"getIsMobile",value:function(){return this.getMobile()?"101":"102"}},{key:"pretreateTrackingData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options,n=this.requestInterceptor;return"function"==typeof n?n(e,t):e}},{key:"formatTrackingData",value:function(e){var t=V(e);return t.moreinfo||(t.moreinfo={}),"object"===x(t.moreinfo)&&(t.moreinfo=this.formatMoreInfoData(t.moreinfo),t.moreinfo=JSON.stringify(t.moreinfo)),"localhost"===t.domain&&(t.domain=""),t}},{key:"destory",value:function(){this.data=void 0,this.options=void 0,this.urlInterceptor=void 0,this.requestInterceptor=void 0}}]),e}(),z=new Array(15);function J(e,t){return 506832829*e>>>t}function K(e,t){return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)}function G(e,t,n){return e[t]===e[n]&&e[t+1]===e[n+1]&&e[t+2]===e[n+2]&&e[t+3]===e[n+3]}function W(e,t,n,r,o){return n<=60?(r[o]=n-1<<2,o+=1):n<256?(r[o]=240,r[o+1]=n-1,o+=2):(r[o]=244,r[o+1]=n-1&255,r[o+2]=n-1>>>8,o+=3),function(e,t,n,r,o){for(var i=0;i<o;i++)n[r+i]=e[t+i]}(e,t,r,o,n),o+n}function Y(e,t,n,r){return r<12&&n<2048?(e[t]=1+(r-4<<2)+(n>>>8<<5),e[t+1]=255&n,t+2):(e[t]=2+(r-1<<2),e[t+1]=255&n,e[t+2]=n>>>8,t+3)}function $(e,t,n,r){for(;r>=68;)t=Y(e,t,n,64),r-=64;return r>64&&(t=Y(e,t,n,60),r-=60),Y(e,t,n,r)}function X(e,t,n,r,o){for(var i=1;1<<i<=n&&i<=14;)i+=1;var a=32-(i-=1);void 0===z[i]&&(z[i]=new Uint16Array(1<<i));for(var s=z[i],c=0;c<s.length;c++)s[c]=0;var u,d,l,p,f,v,h,m,g,y,_=t+n,w=t,b=t,S=!0;if(n>=15)for(u=_-15,l=J(K(e,t+=1),a);S;){v=32,p=t;do{if(d=l,h=v>>>5,v+=1,p=(t=p)+h,t>u){S=!1;break}l=J(K(e,p),a),f=w+s[d],s[d]=t-w}while(!G(e,t,f));if(!S)break;o=W(e,b,t-b,r,o);do{for(m=t,g=4;t+g<_&&e[t+g]===e[f+g];)g+=1;if(t+=g,o=$(r,o,m-f,g),b=t,t>=u){S=!1;break}s[J(K(e,t-1),a)]=t-1-w,f=w+s[y=J(K(e,t),a)],s[y]=t-w}while(G(e,t,f));if(!S)break;l=J(K(e,t+=1),a)}return b<_&&(o=W(e,b,_-b,r,o)),o}var Q=function(){function e(t){w(this,e),this.sources=t}return S(e,[{key:"maxCompressedLength",value:function(){var e=this.sources.length;return 32+e+Math.floor(e/6)}},{key:"compressToBuffer",value:function(e){var t,n=this.sources,r=n.length,o=0,i=0;for(i=function(e,t,n){do{t[n]=127&e,(e>>>=7)>0&&(t[n]+=128),n+=1}while(e>0);return n}(r,e,i);o<r;)i=X(n,o,t=Math.min(r-o,65536),e,i),o+=t;return i}}]),e}();function Z(e){return e instanceof Uint8Array}function ee(e){return e instanceof ArrayBuffer}function te(e){if(!Z(e)&&!ee(e)&&(t=e,!Buffer.isBuffer(t)))throw new TypeError("Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array");var t,n,r=!1,o=!1;Z(e)?(r=!0,n=e):ee(e)&&(o=!0,n=new Uint8Array(e));var i,a,s,c=new Q(n),u=c.maxCompressedLength();return r?(i=new Uint8Array(u),s=c.compressToBuffer(i)):o?(i=new ArrayBuffer(u),a=new Uint8Array(i),s=c.compressToBuffer(a)):(i=Buffer.alloc(u),s=c.compressToBuffer(i)),i.slice(0,s)}function ne(e){return te(function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(e))}var re=Math.pow(2,31)-1;function oe(e){return new Promise((function(t){var n=Number.isSafeInteger(e)&&e>0?e:0;setTimeout(t,n>re?re:n)}))}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}var ae=Object.assign({},B,{wait:"immediately"}),se=function(e){T(a,e);var t,n,r,o,i=ie(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w(this,a),(e=i.call(this,t,n)).trackingTasks=[],e.trackingReportors=[],e}return S(a,[{key:"report",value:(o=C(M.mark((function e(t){var n,r,o=arguments;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]&&o[1],Array.isArray(t)){e.next=3;break}return e.abrupt("return",this.report([t],n));case 3:if(this.addTask.apply(this,I(t)),!n){e.next=7;break}return r=this.trackingTasks.pop(),e.abrupt("return",this.tryReport([r]));case 7:return e.abrupt("return",this.runReport());case 8:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"post",value:(r=C(M.mark((function e(){var t;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.freeTrackingTask()).length>0)){e.next=5;break}return this.tryReport(t),e.abrupt("continue",0);case 5:return e.abrupt("break",8);case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"use",value:function(e,t){A(E(a.prototype),"use",this).call(this,e,t)}},{key:"addTask",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){var n=e.processTrackingData(t),r=e.encodeTrackingData(n);if(e.validTrackingData(r)){var o={encoded:r,source:n};e.trackingTasks.push(o)}}))}},{key:"runReport",value:(n=C(M.mark((function e(){var t,n,r,o,i;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.options,n=t.maxRequest,r=t.wait,!(this.trackingReportors.length>=n)){e.next=4;break}return e.next=4,Promise.all(this.trackingReportors);case 4:if(!a.supported){e.next=13;break}if("nextTick"!==r){e.next=10;break}return e.next=8,Promise.resolve();case 8:e.next=13;break;case 10:if("number"!=typeof r){e.next=13;break}return e.next=13,oe(r);case 13:if(!((o=this.freeTrackingTask()).length>0)){e.next=18;break}return i=this.tryReport(o),e.next=18,this.pushReport(i);case 18:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"freeTrackingTask",value:function(){for(var e=1,t=0;t<this.trackingTasks.length;t++){if((e+=this.trackingTasks[t].encoded.length+3)>H)return this.trackingTasks.splice(0,t)}return this.trackingTasks.splice(0)}},{key:"tryReport",value:(t=C(M.mark((function e(t){var n,r,o,i,a,s,c,u,d=arguments;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:0,e.prev=1,r=this.options,o=r.useHttps,i=r.domain,a="http".concat(!1!==o?"s":"","://").concat(i),e.next=6,this.delegateRequest(a,t);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(1),s=this.options,c=s.useRetry,u=s.retryTimes,!(!0===c&&u>n)){e.next=15;break}return e.next=14,this.tryReport(t,n+1);case 14:return e.abrupt("return",e.sent);case 15:return e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return t.apply(this,arguments)})},{key:"pushReport",value:function(e){var t=this,n=function(){var n=t.trackingReportors.indexOf(e);t.trackingReportors.splice(n,1)},r=e.then(n).catch((function(e){return n(),Promise.reject(e)}));return this.trackingReportors.push(r),r}},{key:"delegateRequest",value:function(e,t){if(!Array.isArray(t)){var n=this.interceptUrl("".concat(e,"/").concat("n.gif"),t);return this.options.skipReport?Promise.resolve():this.send(n,t.encoded)}return 1===t.length?this.delegateRequest(e,t[0]):this.mergeRequest(e,t)}},{key:"mergeRequest",value:function(e,t){var n=t.map((function(e){return e.encoded})),r=this.compressTrackingDatas(n),o=this.interceptUrl("".concat(e,"/").concat("o.gif","?cmp=1&enc=b64"),t);return this.options.skipReport?Promise.resolve():this.send(o,r)}},{key:"interceptUrl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options;return"function"==typeof this.urlInterceptor?this.urlInterceptor(e,t,n):e}},{key:"compressTrackingDatas",value:function(e){var t=ne(JSON.stringify(e)),n=String.fromCharCode.apply(null,new Uint8Array(t));return btoa(n)}},{key:"validTrackingData",value:function(e){return!(e.length>H)||(t=q,"function"==typeof(null===(n=console)||void 0===n?void 0:n.error)?console.error(t):"function"==typeof(null===(r=console)||void 0===r?void 0:r.log)&&console.log(t),!1);var t,n,r}},{key:"destory",value:function(){A(E(a.prototype),"destory",this).call(this),this.trackingTasks.splice(0),this.trackingReportors.splice(0),this.trackingTasks=void 0,this.trackingReportors=void 0}}]),a}(F);L(se,"supported","function"==typeof btoa&&"undefined"!=typeof Uint16Array);var ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http request fail.",n=new Error(t),r=e.xhr,o={type:"ajax",response:null,event:e.event,data:e.data,xhr:r,status:r.status,responseText:r.responseText};try{o.response=JSON.parse(r.responseText)}catch(e){}return Object.assign(n,{detail:o})};function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}var de=function(e){T(n,e);var t=ue(n);function n(){return w(this,n),t.apply(this,arguments)}return S(n,[{key:"send",value:function(e,t){return function(e,t){return new Promise((function(n,r){var o=new XMLHttpRequest;o.open("POST",e),o.onerror=function(e){var n=ce({xhr:o,event:e,data:t});r(n)},o.onreadystatechange=function(e){if(o.readyState===XMLHttpRequest.DONE&&200===o.status)n();else{var i=ce({xhr:o,event:e,data:t});(o.status>=500||o.status>=402&&o.status<=420||400==o.status||401==o.status)&&r(i)}},o.setRequestHeader("Content-Type",N),o.withCredentials=!1,o.send(t)}))}(e,t)}}]),n}(se);L(de,"supported","undefined"!=typeof XMLHttpRequest);var le,pe=function(){var e=C(M.mark((function e(t,n){var r;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new Blob([n],{type:N}),navigator.sendBeacon(t,r)){e.next=4;break}throw new Error("Send beacon fail.");case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}var ve=function(e){T(n,e);var t=fe(n);function n(){return w(this,n),t.apply(this,arguments)}return S(n,[{key:"send",value:function(e,t){return pe(e,t)}}]),n}(se);L(ve,"supported","function"==typeof(null===(le=navigator)||void 0===le?void 0:le.sendBeacon));var he,me,ge,ye,_e,we=function(e){return e&&e.default||e}(Object.freeze({__proto__:null,default:function(e,t){var n=new ve(e,t),r=new de(e,t),o={httpInstance:r,beaconInstance:n};return ve.supported?Object.assign(n,o):de.supported?Object.assign(r,o):void 0}})),be="shopline",Se="tracker_cid",ke="tracker_sid",Te="osudb_uid",xe="merchant_id",Oe="store_id",Ee="tracker_n_sid",Le="n_sess",Re={wait:20},Ie="admintoC",Pe="webslcodetrack",Ce="websdkprotocol",Ae="-999",je=["preview","product"],De="tracker_landing",Me=["session_id","session_create_time","session_rn","last_session_id","session_create_type"],Ve=["merchant_id","user_id","version","store_timezone","user_timezone","store_region"],Ue=Object.freeze({__proto__:null,PROD_ID:be,HTTP_COOKIE_KEY:Se,SESSION_ID_KEY:ke,UID_KEY:Te,MERCHANT_ID_KEY:xe,STORE_ID_KEY:Oe,SERVER_SESSION_ID_KEY:Ee,COOKIE_SESSION_KEY:Le,TRACKER_OPTIONS:Re,APP_ID:"101",PROJECT_ID:Ie,ACT:Pe,LEGACY_ACT:Ce,DEFAULT_CODE:Ae,REPORT_ENV:je,LANDING_SIGN:De,SESSION_KEYS:Me,OUTSIDE_PROPERTIES:Ve}),Ne=D((function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))},e.exports=n()})),He=-1,qe=function(e){addEventListener("pageshow",(function(t){t.persisted&&(He=t.timeStamp,e(t))}),!0)},Be=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Fe=function(){var e=Be();return e&&e.activationStart||0},ze=function(e,t){var n=Be(),r="navigate";return He>=0?r="back-forward-cache":n&&(r=document.prerendering||Fe()>0?"prerender":document.wasDiscarded?"restore":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Je=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Ke=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Ge=function(e,t,n,r){var o,i;return function(a){t.value>=0&&(a||r)&&((i=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},We=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Ye=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},$e=-1,Xe=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Qe=function(e){"hidden"===document.visibilityState&&$e>-1&&($e="visibilitychange"===e.type?e.timeStamp:0,et())},Ze=function(){addEventListener("visibilitychange",Qe,!0),addEventListener("prerenderingchange",Qe,!0)},et=function(){removeEventListener("visibilitychange",Qe,!0),removeEventListener("prerenderingchange",Qe,!0)},tt=function(){return $e<0&&($e=Xe(),Ze(),qe((function(){setTimeout((function(){$e=Xe(),Ze()}),0)}))),{get firstHiddenTime(){return $e}}},nt=function(e,t){t=t||{},Ye((function(){var n,r=[1800,3e3],o=tt(),i=ze("FCP"),a=Je("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<o.firstHiddenTime&&(i.value=Math.max(e.startTime-Fe(),0),i.entries.push(e),n(!0)))}))}));a&&(n=Ge(e,i,r,t.reportAllChanges),qe((function(o){i=ze("FCP"),n=Ge(e,i,r,t.reportAllChanges),We((function(){i.value=performance.now()-o.timeStamp,n(!0)}))})))}))},rt=function(e,t){t=t||{},Ye((function(){var n,r=[.1,.25],o=ze("CLS"),i=-1,a=0,s=[],c=function(t){i>-1&&e(t)},u=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=s[0],r=s[s.length-1];a&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(a+=e.value,s.push(e)):(a=e.value,s=[e]),a>o.value&&(o.value=a,o.entries=s,n())}}))},d=Je("layout-shift",u);d&&(n=Ge(c,o,r,t.reportAllChanges),nt((function(e){i=e.value,o.value<0&&(o.value=0,n())})),Ke((function(){u(d.takeRecords()),n(!0)})),qe((function(){a=0,i=-1,o=ze("CLS",0),n=Ge(c,o,r,t.reportAllChanges),We((function(){return n()}))})))}))},ot={passive:!0,capture:!0},it=new Date,at=function(e,t){he||(he=t,me=e,ge=new Date,ut(removeEventListener),st())},st=function(){if(me>=0&&me<ge-it){var e={entryType:"first-input",name:he.type,target:he.target,cancelable:he.cancelable,startTime:he.timeStamp,processingStart:he.timeStamp+me};ye.forEach((function(t){t(e)})),ye=[]}},ct=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){at(e,t),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,ot),removeEventListener("pointercancel",r,ot)};addEventListener("pointerup",n,ot),addEventListener("pointercancel",r,ot)}(t,e):at(t,e)}},ut=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,ct,ot)}))},dt=function(e,t){t=t||{},Ye((function(){var n,r=[100,300],o=tt(),i=ze("FID"),a=function(e){e.startTime<o.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},s=function(e){e.forEach(a)},c=Je("first-input",s);n=Ge(e,i,r,t.reportAllChanges),c&&Ke((function(){s(c.takeRecords()),c.disconnect()}),!0),c&&qe((function(){var o;i=ze("FID"),n=Ge(e,i,r,t.reportAllChanges),ye=[],me=-1,he=null,ut(addEventListener),o=a,ye.push(o),st()}))}))},lt=0,pt=1/0,ft=0,vt=function(e){e.forEach((function(e){e.interactionId&&(pt=Math.min(pt,e.interactionId),ft=Math.max(ft,e.interactionId),lt=ft?(ft-pt)/7+1:0)}))},ht=function(){return _e?lt:performance.interactionCount||0},mt=function(){"interactionCount"in performance||_e||(_e=Je("event",vt,{type:"event",buffered:!0,durationThreshold:0}))},gt=0,yt=function(){return ht()-gt},_t=[],wt={},bt=function(e){var t=_t[_t.length-1],n=wt[e.interactionId];if(n||_t.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};wt[r.id]=r,_t.push(r)}_t.sort((function(e,t){return t.latency-e.latency})),_t.splice(10).forEach((function(e){delete wt[e.id]}))}},St=function(e,t){t=t||{},Ye((function(){var n=[200,500];mt();var r,o=ze("INP"),i=function(e){e.forEach((function(e){e.interactionId&&bt(e),"first-input"===e.entryType&&!_t.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&bt(e)}));var t,n=(t=Math.min(_t.length-1,Math.floor(yt()/50)),_t[t]);n&&n.latency!==o.value&&(o.value=n.latency,o.entries=n.entries,r())},a=Je("event",i,{durationThreshold:t.durationThreshold||40});r=Ge(e,o,n,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),Ke((function(){i(a.takeRecords()),o.value<0&&yt()>0&&(o.value=0,o.entries=[]),r(!0)})),qe((function(){_t=[],gt=ht(),o=ze("INP"),r=Ge(e,o,n,t.reportAllChanges)})))}))},kt={},Tt=function(e,t){t=t||{},Ye((function(){var n,r=[2500,4e3],o=tt(),i=ze("LCP"),a=function(e){var t=e[e.length-1];if(t){var r=Math.max(t.startTime-Fe(),0);r<o.firstHiddenTime&&(i.value=r,i.entries=[t],n())}},s=Je("largest-contentful-paint",a);if(s){n=Ge(e,i,r,t.reportAllChanges);var c=function(){kt[i.id]||(a(s.takeRecords()),s.disconnect(),kt[i.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),Ke(c,!0),qe((function(o){i=ze("LCP"),n=Ge(e,i,r,t.reportAllChanges),We((function(){i.value=performance.now()-o.timeStamp,kt[i.id]=!0,n(!0)}))}))}}))},xt=function e(t){document.prerendering?Ye((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},Ot=function(e,t){t=t||{};var n=[800,1800],r=ze("TTFB"),o=Ge(e,r,n,t.reportAllChanges);xt((function(){var i=Be();if(i){var a=i.responseStart;if(a<=0||a>performance.now())return;r.value=Math.max(a-Fe(),0),r.entries=[i],o(!0),qe((function(){r=ze("TTFB",0),(o=Ge(e,r,n,t.reportAllChanges))(!0)}))}}))},Et=new(function(){function e(){}return e.prototype.get=function(e){var t;try{var n=JSON.parse(localStorage.getItem(e)||"");n&&n.value&&(n.maxAge?n.maxAge>Date.now()-(n.timeOffset||0)?t=n.value:this.remove(e):t=n.value)}catch(e){}return t},e.prototype.set=function(e,t,n,r){void 0===r&&(r=0);try{var o={value:t,maxAge:n?Date.now()-r+60*n*1e3:null,timeOffset:r};localStorage.setItem(e,JSON.stringify(o))}catch(e){}},e.prototype.remove=function(e){localStorage.removeItem(e)},e.prototype.getRaw=function(e){var t={value:null,maxAge:null,timeOffset:0};try{var n=JSON.parse(localStorage.getItem(e)||"");n&&n.value&&(t=n)}catch(e){}return t},e.prototype.isExpired=function(e){try{var t=JSON.parse(localStorage.getItem(e)||"");return!t||!t.value||!(!t.maxAge||t.maxAge&&t.maxAge>(Date.now()-t.timeOffset||0))}catch(e){}return!0},e.prototype.append=function(e,t){try{var n=JSON.parse(localStorage.getItem(e)||"");if(n&&n.value)return Object.assign(n.value,t),localStorage.setItem(e,JSON.stringify(n)),n.value}catch(e){}},e}()),Lt=new(function(){function e(){this.webVitals={CLS:"",FCP:"",FID:"",INP:"",LCP:"",TTFB:""},this.getWebVitals()}return e.prototype.getHttpCookie=function(e){void 0===e&&(e=0);var t=Et.get(Se);return t||(t=v(),Et.set(Se,t,e)),t},e.prototype.getSessionId=function(e,t,n){void 0===e&&(e=30),void 0===t&&(t=0);var r=Et.getRaw(ke),o=+new Date;n&&(o-=n);var i=r.value;i||(i={});var a=i.sid||"",s=r.maxAge&&r.maxAge<o,c=+i.ite;if(!i.sid||s){i={sid:v(),createAt:o,rn:1,last_session_id:a,session_create_type:101};var u=document.referrer;if(u){var d=window.location.host;new URL(u).host!==d&&(i.ref=u)}s&&(i.session_create_type=c?103:102)}var l=new Date(o).setUTCHours(0,0,0,0);l<o&&(l+=864e5);var p=(l-o)/1e3/60,f=o+6e4*new Date(o).getTimezoneOffset()+1e3*t,h=(new Date(f+864e5).setHours(0,0,0,0)-f)/1e3/60,m=Math.min(e,p,h);return i.ite=p<e||h<e?1:0,o+60*e*1e3<i.createAt&&(i.createAt=o),Et.set(ke,i,m,n),i},e.prototype.getSession=function(){return Et.getRaw(ke)},e.prototype.getRawSessionId=function(){var e,t;return null===(t=null===(e=this.getSession())||void 0===e?void 0:e.value)||void 0===t?void 0:t.sid},e.prototype.upsetSessionRn=function(e){var t=e.rn||1;return Et.append(ke,{rn:t+1}),t},e.prototype.getHttpSearch=function(){return window.location.search},e.prototype.getUrlPath=function(){return window.location.pathname},e.prototype.getMobile=function(){var e=navigator.userAgent,t=!e.match(/(iPad).*OS\s([\d_]+)/)&&e.match(/(iPhone\sOS)\s([\d_]+)/),n=e.match(/(Android)\s+([\d.]+)/);return t||n},e.prototype.getIsMobile=function(){return this.getMobile()?"101":"102"},e.prototype.getWebsite=function(){return this.getMobile()?"102":"101"},e.prototype.getLanguage=function(){return navigator.language},e.prototype.getUserId=function(){return Ne.get(Te)},e.prototype.getMerchantId=function(){return Ne.get(xe)},e.prototype.getTitle=function(){var e;return null===(e=document.title)||void 0===e?void 0:e.substr(0,255)},e.prototype.getStoreId=function(){return Ne.get(Oe)},e.prototype.getScreenWidth=function(){return window.screen.width},e.prototype.getScreenHeight=function(){return window.screen.height},e.prototype.getWebVitals=function(){var e=this;[Tt,dt,rt,St,nt,Ot].forEach((function(t){return t((function(t){e.webVitals[t.name]=t.value}))}))},e.prototype.getPerformance=function(){var e=window.performance||window.webkitPerformance,t={},n=e&&e.timing;if(e&&n){var r=0;window.chrome&&window.chrome.loadTimes&&(r=1e3*window.chrome.loadTimes().firstPaintTime,r-=n.navigationStart),t.dns=Math.ceil(n.domainLookupEnd-n.domainLookupStart),t.tcp=Math.ceil(n.connectEnd-n.connectStart),t.request=Math.ceil(n.responseEnd-n.requestStart),t.connect=Math.ceil(n.responseStart-n.domainLookupStart),t.processing=Math.ceil((n.domComplete||n.domLoading)-n.domLoading),t.ready=Math.ceil(n.domContentLoadedEventEnd-n.navigationStart),t.load=Math.ceil(n.loadEventEnd-n.navigationStart),t.white=Math.ceil(n.responseStart-n.navigationStart),t.first_paint=r,t.first_paint||(t.first_paint=n.domLoading>=n.navigationStart?n.domLoading-n.navigationStart:0),t.first_paint=Math.ceil(t.first_paint),t.active=Math.ceil(n.domInteractive-n.navigationStart)}return t},e}());function Rt(e,t){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];i&&Object.prototype.hasOwnProperty.call(e,i)&&(n["".concat(i)]=e[i],delete e[i])}return n}function It(){return v()}function Pt(){try{var e=Ne.get(Le);return e?JSON.parse(e):null}catch(e){console.error(e)}return null}function Ct(e){var t=0;return(e=[].concat(e))&&e.length&&(t=e.some((function(e){var t,n,r,o;return"101"===String(null===(n=null===(t=e.source)||void 0===t?void 0:t.moreinfo)||void 0===n?void 0:n.event_name)&&"60006253"===String(null===(r=e.source)||void 0===r?void 0:r.eventid)||"PageView"===(null===(o=e.source)||void 0===o?void 0:o.event_name)}))),Number(t)}function At(e){var t;if(!(null===(t=null==e?void 0:e.trim)||void 0===t?void 0:t.call(e)))return e;var n="string"==typeof e?e:"".concat(e);return n.charAt(0).toLowerCase()+n.slice(1)}var jt=function(){function e(){this.debugMode=!0,this.options=r(r({},Re),{timezoneOffset:0,env:"",disableIframeId:!1}),this.interceptor={},this.setServerRn()}return e.prototype.setOptions=function(e){this.options=r(r({},this.options),e),-1!==je.indexOf(this.options.env)&&this.setDebugMode(!1)},e.prototype.getOptions=function(){return this.options},e.prototype.setDebugMode=function(e){this.debugMode=e},e.prototype.initInstance=function(e){void 0===e&&(e={});var t=we;return t&&t.default&&(t=t.default),t(r(r(r({},this.options),e),{domain:"".concat(window.location.host,"/eclytics")}))},e.prototype.use=function(e,t){switch(e){case"url":case"request":this.interceptor[e]=t;break;default:this.instance?this._instanceUse(e,t):this.interceptor[e]=t}},e.prototype._instanceUse=function(e,t,n){void 0===n&&(n=this.instance),n&&(n.use(e,t),["httpInstance","beaconInstance"].forEach((function(r){var o;null===(o=n[r])||void 0===o||o.use(e,t)})))},e.prototype._interceptorUse=function(e){var t=this;void 0===e&&(e=this.instance),Object.keys(this.interceptor).filter((function(e){return!/(url|request)/.test(e)})).forEach((function(n){"function"==typeof t.interceptor[n]&&t._instanceUse(n,t.interceptor[n],e)}))},e.prototype._useRequestCallback=function(e){var t,n=this.options.timeOffset;if(n){var o=e.event_created_at_ms,i=e.request_time,a=null===(t=e.moreinfo)||void 0===t?void 0:t.event_created_at_ms;a&&(e.moreinfo.event_created_at_ms=String(a-n)),e.event_created_at_ms=o?o-n:void 0,e.request_time=i-n,e.time=Math.ceil(e.request_time/1e3)}if(e.act===Ce)return e;var s=r(r({},e),{event_sent_at_ms:e.request_time});return delete s.request_time,s.$data_id&&(s.data_id=s.$data_id,delete s.$data_id),s},e.prototype.getInstance=function(){var e=this;if(!this.instance){this.instance=this.initInstance();var t=It();this._instanceUse("url",(function(n,r,o){"function"==typeof e.interceptor.url&&(n=e.interceptor.url(n,r,o));var i=Lt.getSession().value;if(i&&i.sid){var a=i.sid,s=i.createAt,c=[].concat(r),u=Ct(c);return"".concat(n).concat(-1===n.indexOf("?")?"?":"&","_sid=").concat(a,"&_sct=").concat(s,"&_tid=").concat(t,"&_pdppv=").concat(u,"&_bcount=").concat(c.length)}return n})),this._instanceUse("request",this._useRequestCallback.bind(this)),this._interceptorUse()}return this.instance},e.prototype.getServerInstance=function(){var e=this;if(!this.serverInstance){this.serverInstance=this.initInstance({skipReport:!0});var t=It(),n=this.serverInstance;this._instanceUse("url",(function(n,r,o){"function"==typeof e.interceptor.url&&(n=e.interceptor.url(n,r,o));var i=Pt(),a=function(e){for(var t={},n=("?"===e[0]?e.substr(1):e).split("&"),r=0;r<n.length;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]||"")}return t}(n.substring(n.indexOf("?")+1))._pid,s=void 0===a?"":a;if(i){var c=[].concat(r),u=i.session_id,d=i.created_at,l=(Et.get(Ee)||{}).rn,p=c.map((function(e){var n=e.source,r=Ct(e),o={_pid:s,_act:"".concat(n.act,"_").concat(n.event_id||-999),_sid:u,_sct:d,_tid:t,_pdppv:r,_bcount:1},i=Object.keys(o).reduce((function(e,t){return"".concat(e,"&").concat(t,"=").concat(o[t])}),"");return n.session_rn=l||void 0,l&&(l+=1),delete n.$data_id,{query:i.replace("&",""),data:n}}));Et.set(Ee,{sid:u,rn:l});var f=U({timezoneOffset:e.options.timezoneOffset||0,payload:p});e.serverInstance.send("/capture/bp",f)}}),n),this._instanceUse("request",(function(t){return e._useRequestCallback(t)}),n),this._interceptorUse(n)}return this.serverInstance},e.prototype.reportV2=function(t,n){return i(this,void 0,void 0,(function(){function i(e,t){var n=u?null==e?void 0:e.httpInstance.report(t,d):null==e?void 0:e.report(t,d);return c&&e.post(),n}var s,c,u,d,l,p,f,v,h,m,g,y,_,w,b,S,k,T,x,O,E,L,R,I,P,C,A,j,D,M,V,U,N,H,q,B,F,z,J,K,G,W,Y,$;return a(this,(function(a){return c=(s=n||{}).immediately,u=s.isHttpReport,d=s.reportNow,l=s.ignoreLanding,p=void 0!==l&&l,f=s.actFields,v=t.app_id,h=t.http_cookie,m=t.session_id,g=t.session_create_time,y=t.session_rn,_=t.last_session_id,w=t.session_create_type,b=t.store_id,S=t.action_type,k=void 0===S?Ae:S,T=t.module,x=void 0===T?Ae:T,O=t.page,E=void 0===O?Ae:O,L=t.component,R=void 0===L?Ae:L,I=t.store_timezone,P=t.user_timezone,C=t.store_region,A=t.event_created_at_ms,j=t.device_token,D=t.ua_info,M=t.event_id,V=t.event_name,U=t.data_id,N=t.moreinfo,H=void 0===N?{}:N,q=o(t,["app_id","http_cookie","session_id","session_create_time","session_rn","last_session_id","session_create_type","store_id","action_type","module","page","component","store_timezone","user_timezone","store_region","event_created_at_ms","device_token","ua_info","event_id","event_name","data_id","moreinfo"]),B=Rt(q,Ve),F=Rt(H,Ve),z=p?0:this._getSessionCreateDataId({sid:m,isCollect:!0}),J=r(r(r(r({project_id:Ie,app_id:v,act:Pe,http_cookie:h,session_id:m,session_create_time:g,session_rn:y,last_session_id:_,session_create_type:w,store_id:b,action_type:k,module:x,page:E,component:R,store_timezone:I,user_timezone:P,store_region:C,event_created_at_ms:A,event_id:M,event_name:V,device_token:j,ua_info:D,env:this.options.env},F),B),f),{moreinfo:r(r(r({},H),q),{session_create_data_id:z})}),K=e.encodeParams(J),G=J.moreinfo,K.moreinfo=JSON.stringify(G),this.debugMode&&(console.groupCollapsed("Tracker Debug(reportV2):Wait Mode:".concat(this.options.wait,".event_id:").concat(M," immediately:").concat(!!c," isHttpReport:").concat(!!u," reportNow:").concat(!!d)),console.table(t),console.groupEnd()),-1===je.indexOf(this.options.env)?[2,Promise.resolve()]:(W=[],U&&(K.$data_id=U),Y=this.getInstance(),K.is_server=0,W.push(i(Y,K)),U&&($=this.getServerInstance(),Me.forEach((function(e){G["web_".concat(e)]=K[e],delete K[e]})),K.moreinfo=JSON.stringify(G),K.is_server=1,W.push(i($,K))),[2,Promise.all(W)])}))}))},e.prototype.reportJudge=function(t,n,r,i,a,s){if(this.debugMode&&n&&(console.groupCollapsed("Tracker Debug:".concat(t,"-").concat(n.event_name,". Wait Mode:").concat(this.options.wait,". immediately:").concat(r)),console.table(n),console.groupEnd()),-1!==je.indexOf(this.options.env)){var c=e.encodeParams(n),u=this.getInstance(),d=c.session_create_type,l=c.last_session_id,p=o(c,["session_create_type","last_session_id"]);p.session_create_data_id=s?0:this._getSessionCreateDataId({sid:p.session_id});var f={prodid:be,eventid:t,ref:document.referrer,act:Ce,session_create_type:d,last_session_id:l,moreinfo:p},v=i?null==u?void 0:u.httpInstance.report(f,a):null==u?void 0:u.report(f,a);return r&&u.post(),v}return Promise.resolve()},e.prototype.getDataId=function(){return v()},e.prototype.setServerRn=function(){try{var e=Pt(),t=(Et.get(Ee)||{}).sid,n=(e||{}).session_id;n&&n!==t&&Et.set(Ee,{sid:n,rn:1})}catch(e){console.error(e)}},e.prototype._getSessionCreateDataId=function(e){var t,n,r=e.sid,o=e.isCollect,i=void 0!==o&&o,a=Et.get(De),s=(null==a?void 0:a[r])||[];if(!s||!Array.isArray(s))return 0;var c=s[0],u=s[1];return i&&!u?(Et.set(De,((t={})[r]=[c,1],t)),1):i||c?0:(Et.set(De,((n={})[r]=[1,u],n)),1)},e.encodeParams=function(e){return Object.keys(e).reduce((function(t,n){try{t[n]=encodeURIComponent(e[n]||"")}catch(r){console.error("[tracker] encodeURIComponent params error:",r),t[n]=e[n]}return t}),{})},e}(),Dt="1.6.30";function Mt(e){return e&&"[object Function]"==={}.toString.call(e)}var Vt=function(){function e(e){this.exposedElements=new Set,this.collect=null,(null===window||void 0===window?void 0:window.SL_Report)||(window.SL_Report={}),window.SL_Report.exposeMap||(window.SL_Report.exposeMap=new Map),this.collect=e}return e.prototype.init=function(){var e=this;if(!window.SL_Report.exposeObserver){var t={threshold:Array.from(Array(11).keys()).map((function(e){return e/10})),root:null,rootMargin:"0px"};window.SL_Report.exposeObserver=new IntersectionObserver((function(t){t.forEach((function(t){var n,r,o=t.isIntersecting,i=t.intersectionRatio,a=t.boundingClientRect,s=t.time,c=t.target,u=c.dataset.__trackerSelector||"",d=(null===(n=window.SL_Report.exposeMap)||void 0===n?void 0:n.get(u))||{},l=d.view,p=d.viewSuccess,f=(p||{}).threshold,v=void 0===f?.5:f,h=a.height>window.innerHeight;h&&(c.dataset.__trackerSuperLong="1"),o&&p&&(i>=v||h)?c.dataset.__trackerViewSucceed||c.dataset.__trackerViewSuccessOnce||(c.dataset.__trackerLastViewStarted=String(s),c.dataset.__trackerViewSucceed="1",e.exposedElements.add(c),(null===(r=window.SL_Report)||void 0===r?void 0:r.exposeTimer)||e.checkTimer({element:c})):(e.resetTime(c),delete c.dataset.__trackerViewSucceed,e.exposedElements.delete(c)),o&&l&&i>=0?c.dataset.__trackerViewed||c.dataset.__trackerViewOnce||(e.reportView(c,l),c.dataset.__trackerViewed="1",l.reportOnce&&(c.dataset.__trackerViewOnce="1")):delete c.dataset.__trackerViewed}))}),t)}},e.prototype.reportView=function(e,t){var n,o=(t||{}).params,i=void 0===o?{}:o;"function"==typeof i&&(i=i(e)),null===(n=this.collect)||void 0===n||n.call(this,r({event_name:"View",action_type:101},i))},e.prototype.reportViewSuccess=function(e,t){var n,o=(t||{}).params,i=void 0===o?{}:o;"function"==typeof i&&(i=i(e)),null===(n=this.collect)||void 0===n||n.call(this,r({event_name:"ViewSuccess",action_type:108},i))},e.prototype.track=function(e){var t=this,n=e.selector,r=e.targetList;if(n||(null==r?void 0:r.length)){var o=Math.random().toString(32).slice(2),i=r?'[data-__tracker-id="'.concat(o,'"]'):n;window.SL_Report.exposeObserver||this.init();var a=window.SL_Report,s=a.exposeObserver,c=a.exposeMap;this.checkTimer({options:e}),(r||document.querySelectorAll(n)).forEach((function(e){t.resetTime(e),e.dataset.__trackerSelector=i||n,(null==r?void 0:r.length)&&(e.dataset.__trackerId=o),s.observe(e)})),c.set(i,e)}},e.prototype.checkTimer=function(e){var t,n=this,r=e.element,o=e.options;if(window.SL_Report.exposeMap){var i=o;if(!i){var a=(null==r?void 0:r.dataset.__trackerSelector)||"";i=window.SL_Report.exposeMap.get(a)}var s=this.getTimeout(i);clearTimeout(null===(t=window.SL_Report)||void 0===t?void 0:t.exposeTimer);var c=function(){window.SL_Report.exposeTimer=window.setTimeout((function(){!n.handleRefreshTimeout()&&c()}),s)};c()}},e.prototype.handleRefreshTimeout=function(){var e=this;if(!this.exposedElements.size)return clearTimeout(window.SL_Report.exposeTimer),delete window.SL_Report.exposeTimer,!0;var t=window.SL_Report,n=t.exposeMap,r=t.exposeObserver;n&&this.exposedElements.forEach((function(t){var o=t.dataset,i=o.__trackerTotalViewTime,a=void 0===i?0:i,s=o.__trackerSelector,c=void 0===s?"":s,u=o.__trackerSuperLong,d=document.querySelectorAll(c);if(!Array.from(d).some((function(e){return e===t})))return e.exposedElements.delete(t),void r.unobserve(t);var l=(n.get(c)||{}).viewSuccess,p=void 0===l?{}:l,f=p.threshold,v=void 0===f?.5:f;if(u){var h=t.getBoundingClientRect(),m=h.top,g=h.height;if(m+g<0)return e.resetTime(t);if((window.innerHeight-m)/g<v)return e.resetTime(t)}e.updateExposeTimer(t),a>=(p.duration||300)&&(e.reportViewSuccess(t,p),e.resetTime(t),e.exposedElements.delete(t),p.reportOnce&&(t.dataset.__trackerViewSuccessOnce="1"))}))},e.prototype.updateExposeTimer=function(e){var t=+(e.dataset.__trackerLastViewStarted||0),n=performance.now();if(t){var r=n-t;e.dataset.__trackerTotalViewTime=String(parseFloat(e.dataset.__trackerTotalViewTime)+r)}e.dataset.__trackerLastViewStarted=String(n)},e.prototype.getTimeout=function(e){var t,n=window.SL_Report.exposeMap;if(!n)return 1e3;var r=Array.from(n.values()).map((function(e){var t;return((null===(t=e.viewSuccess)||void 0===t?void 0:t.duration)||300)/2})),o=Math.min.apply(Math,s(s([],r,!1),[1e3,((null===(t=null==e?void 0:e.viewSuccess)||void 0===t?void 0:t.duration)||300)/2],!1));return o>100?o:100},e.prototype.resetTime=function(e){e.dataset.__trackerTotalViewTime="0",e.dataset.__trackerLastViewStarted="0"},e}();var Ut=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Nt="object"==typeof j&&j&&j.Object===Object&&j,Ht="object"==typeof self&&self&&self.Object===Object&&self,qt=Nt||Ht||Function("return this")(),Bt=function(){return qt.Date.now()},Ft=/\s/;var zt=function(e){for(var t=e.length;t--&&Ft.test(e.charAt(t)););return t},Jt=/^\s+/;var Kt=function(e){return e?e.slice(0,zt(e)+1).replace(Jt,""):e},Gt=qt.Symbol,Wt=Object.prototype,Yt=Wt.hasOwnProperty,$t=Wt.toString,Xt=Gt?Gt.toStringTag:void 0;var Qt=function(e){var t=Yt.call(e,Xt),n=e[Xt];try{e[Xt]=void 0;var r=!0}catch(e){}var o=$t.call(e);return r&&(t?e[Xt]=n:delete e[Xt]),o},Zt=Object.prototype.toString;var en=function(e){return Zt.call(e)},tn=Gt?Gt.toStringTag:void 0;var nn=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":tn&&tn in Object(e)?Qt(e):en(e)};var rn=function(e){return null!=e&&"object"==typeof e};var on=function(e){return"symbol"==typeof e||rn(e)&&"[object Symbol]"==nn(e)},an=/^[-+]0x[0-9a-f]+$/i,sn=/^0b[01]+$/i,cn=/^0o[0-7]+$/i,un=parseInt;var dn=function(e){if("number"==typeof e)return e;if(on(e))return NaN;if(Ut(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ut(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Kt(e);var n=sn.test(e);return n||cn.test(e)?un(e.slice(2),n?2:8):an.test(e)?NaN:+e},ln=Math.max,pn=Math.min;var fn=function(e,t,n){var r,o,i,a,s,c,u=0,d=!1,l=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,i=o;return r=o=void 0,u=t,a=e.apply(i,n)}function v(e){return u=e,s=setTimeout(m,t),d?f(e):a}function h(e){var n=e-c;return void 0===c||n>=t||n<0||l&&e-u>=i}function m(){var e=Bt();if(h(e))return g(e);s=setTimeout(m,function(e){var n=t-(e-c);return l?pn(n,i-(e-u)):n}(e))}function g(e){return s=void 0,p&&r?f(e):(r=o=void 0,a)}function y(){var e=Bt(),n=h(e);if(r=arguments,o=this,c=e,n){if(void 0===s)return v(c);if(l)return clearTimeout(s),s=setTimeout(m,t),f(c)}return void 0===s&&(s=setTimeout(m,t)),a}return t=dn(t)||0,Ut(n)&&(d=!!n.leading,i=(l="maxWait"in n)?ln(dn(n.maxWait)||0,t):i,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=o=s=void 0},y.flush=function(){return void 0===s?a:g(Bt())},y};var vn=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Ut(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),fn(e,t,{leading:r,maxWait:t,trailing:o})},hn=new(function(e){function n(){var t,n=this;return(n=e.call(this)||this).pageViewTime=Date.now(),n.maxScrollTop=0,n.skipOnSessionUpdate=!1,n.beginSessionId="",n.heartbeatIds=[],n.exposeInstance=null,n.destUrlLock=!1,n.pageLeaveLock=!1,(null===(t=window.SL_Report)||void 0===t?void 0:t.skipSelfInit)||n.init(),n}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,e),n.prototype.setMode=function(e){"debug"===e?this.setDebugMode(!0):this.setDebugMode(!1)},n.prototype.getBaseParams=function(e){return i(this,void 0,void 0,(function(){var t,n,r,o,i,s,c,u,d,l,p,f,v,h,m,g;return a(this,(function(a){switch(a.label){case 0:return 1,t=this.getOptions(),n=t.timezoneOffset,r=void 0===n?0:n,o=t.handleBaseParams,i=t.disableIframeId,s=t.timeOffset,c=void 0===s?0:s,d=(u=e||{}).ignoreSession,l=void 0!==d&&d,p=u.ignoreSessionRn,f=void 0!==p&&p,v=u.session,h={version:Dt,iframe_id:1,http_cookie:Lt.getHttpCookie(),url_path:Lt.getUrlPath(),language:Lt.getLanguage(),is_mobile:Lt.getIsMobile(),merchant_id:Lt.getMerchantId(),user_id:Lt.getUserId(),http_search:Lt.getHttpSearch(),title:Lt.getTitle(),store_id:Lt.getStoreId(),website:Lt.getWebsite(),loading_time:Lt.getPerformance().load,event_created_at_ms:+new Date,screen_width:Lt.getScreenWidth(),screen_height:Lt.getScreenHeight()},l||(m=(null==v?void 0:v.sid)?v:Lt.getSessionId(30,r,c),g=f?void 0:Lt.upsetSessionRn(m),h.session_id=m.sid,h.session_create_time=m.createAt,h.session_rn=g,h.last_session_id=m.last_session_id,h.session_create_type=m.session_create_type),i&&delete h.iframe_id,o&&"function"==typeof o?[4,o(h)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2,h]}}))}))},n.prototype.formatParams=function(e){var t=r({},e);if(t.products&&Array.isArray(t.products)){var n=["product_type","product_id","variantion_id","product_name","product_price","position","status","quantity","update_quantity","price"];t.products.forEach((function(e){n.forEach((function(n){e[n]&&(t[n]||(t[n]=[]),t[n].push(e[n]))}))})),delete t.products}return Object.entries(t).forEach((function(e){var n=e[0],r=e[1],o=r;n in m&&(Array.isArray(r)?g.indexOf(n)>-1&&(o=(r||[]).map((function(e){return m[n][e]})).join(",")):o=m[n][r]||r),Array.isArray(o)&&(o=o.join(",")),t[n]=o})),t},n.prototype.setDefaultEventId=function(e){var t=e.event_name,n=void 0===t?"":t,o=e.event_id,i=e.action_type;if(y.includes(n)){var a=Ae,s=o?At(o):"".concat(At(n)).concat(Date.now(),"_").concat(v().replace(/-/g,""));return _.includes(n)&&(a=i||a),r(r({},e),{action_type:a,event_id:s})}return e},n.prototype.collect=function(e,t){var n;return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var o,i,s,c,u,d,l,p,f,v,m,g;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),o=this.getOptions(),i=o.beforeSend,s=o.onSessionUpdate,c=o.timezoneOffset,u=o.timeOffset,d=(null===(n=Et.getRaw(ke))||void 0===n?void 0:n.value)||null,l=Et.isExpired(ke),p=String(e.action_type||"")===h.heartbeat,[4,this.getBaseParams({ignoreSession:t.ignoreSession,ignoreSessionRn:p})];case 1:return f=a.sent(),v=r(r({},f),this.setDefaultEventId(e)),i&&"function"==typeof i?[4,i(v)]:[3,3];case 2:v=a.sent(),a.label=3;case 3:return!this.skipOnSessionUpdate&&l&&d&&"function"==typeof s?(m=Lt.getSessionId(30,c,u),this.skipOnSessionUpdate=!0,[4,s(d,m)]):[3,5];case 4:a.sent(),this.skipOnSessionUpdate=!1,a.label=5;case 5:return t.ignoreLanding=p,[2,this.reportV2(v,t)];case 6:throw g=a.sent(),this.skipOnSessionUpdate=!1,console.error("collect tracker error:",g),g;case 7:return[2]}}))}))},n.prototype.report=function(e,t,n,r,o,s){return i(this,void 0,void 0,(function(){var i,c,u,d,l,p;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),i="141"===String((null==t?void 0:t.event_name)||""),[4,this.getBaseParams({ignoreSessionRn:i})];case 1:return c=a.sent(),u=this.formatParams(t),d=Object.assign({},c,u),(l=this.getOptions().beforeSend)&&"function"==typeof l?[4,l(d)]:[3,3];case 2:d=a.sent(),a.label=3;case 3:return[2,this.reportJudge(e,d,null!=n?n:"leave"===(null==u?void 0:u.event_name),r,o,!!i||s)];case 4:throw p=a.sent(),console.error("tracker[".concat(e,"] error:"),p),p;case 5:return[2]}}))}))},n.prototype.setPageViewTime=function(e){void 0===e&&(e=+new Date),this.pageViewTime=e},n.prototype.init=function(){var e,t=this;if("undefined"!=typeof window&&(window.SL_Report=window.SL_Report||{},!(null===(e=window.SL_Report)||void 0===e?void 0:e.init))){var n,r;window.SL_Report.init=!0,n=function(){return t.pageView()},document.removeEventListener("DOMContentLoaded",n),"loading"!==document.readyState?setTimeout(n,1):document.addEventListener("DOMContentLoaded",(function(){setTimeout(n)})),!function(e){window.removeEventListener("scroll",e),window.addEventListener("scroll",e,!1)}(vn((function(){return t.recordScrollTop()}),100)),function(e){window.removeEventListener("beforeunload",e),window.addEventListener("beforeunload",e)}((function(e){var n,r;return"A"!==(null===(r=null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.activeElement)||void 0===r?void 0:r.tagName)&&t.pageLeave()})),{visibleHandler:Mt((r={visible:function(){return t.setPageViewTime()},hidden:function(){return t.pageDuration()}}).visible)?r.visible:function(){},hiddenHandler:Mt(r.hidden)?r.hidden:function(){},visibilityChange:"",hidden:"",isSupport:function(){return void 0!==document[this.hidden]},init:function(){void 0!==document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):void 0!==document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),this.listen()},listen:function(){if(this.isSupport()){var e=this;document.addEventListener(this.visibilityChange,(function(){document[e.hidden]?e.hiddenHandler():e.visibleHandler()}),!0)}else window.addEventListener("focus",this.visibleHandler),window.addEventListener("blur",this.hiddenHandler)}}.init();document.addEventListener("click",(function(e){if(!t.destUrlLock)for(var n=function(e){if(e.path)return e.path;if("function"==typeof e.composedPath)return e.composedPath();for(var t=[],n=e.target;n&&null!==n.parentNode;)t.push(n),n=n.parentNode;return t.push(document,window),t}(e),r=n.length-1;r>=0;r--){var o=n[r];if(o&&1===o.nodeType&&"a"===o.nodeName.toLowerCase()&&/^https?:\/\//.test(o.href)){t.pageLeave({params:{page_dest_url:o.href}}),t.pageLeaveLock=!0,setTimeout((function(){t.pageLeaveLock=!1}),100);break}}})),this.setOptions({onSessionUpdate:function(e){return i(t,void 0,void 0,(function(){return a(this,(function(t){return[2,this.pageDuration({session:e})]}))}))}})}},n.prototype.pageView=function(e){var t=void 0===e?{}:e,n=t.params,o=t.session;return i(this,void 0,void 0,(function(){return a(this,(function(e){return this.setPageViewTime(),Lt.getWebVitals(),this.beginSessionId=(null==o?void 0:o.sid)||Lt.getRawSessionId(),[2,this.collect(r({event_name:"PageView"},n),{session:o})]}))}))},n.prototype.pageLeave=function(e){var t=void 0===e?{}:e,n=t.params,o=t.session;return i(this,void 0,void 0,(function(){var e,t,i;return a(this,(function(a){return this.pageLeaveLock?[2,Promise.resolve()]:(e=this.getMaxHeightParams(),t=this.collect(r(r(r({event_name:"PageLeave"},e),n),Lt.webVitals),{session:o}),i=this.pageDuration({isPageLeave:!0,params:n}),this.destroy(),[2,Promise.all([t,i])])}))}))},n.prototype.pageDuration=function(e){var t=void 0===e?{}:e,n=t.params,o=t.session,s=t.isPageLeave,c=void 0!==s&&s;return i(this,void 0,void 0,(function(){var e,t,i,s;return a(this,(function(a){return this.pageLeaveLock?[2,Promise.resolve()]:(e="",t=(+new Date-this.pageViewTime)/1e3,(isNaN(t)||t<0)&&(t=0),t=Number(t.toFixed(3)),t=Math.min(t,1800),i=this.getMaxHeightParams(),c&&(e=Lt.getRawSessionId()),s=this.collect(r(r({event_name:"PageDuration",event_duration:t,begin_session:this.beginSessionId||Lt.getRawSessionId(),end_session:e},i),n),{session:o}),this.setPageViewTime(),[2,s])}))}))},n.prototype.heartbeat=function(e,t){return void 0===t&&(t=2e3),i(this,void 0,void 0,(function(){var n,o=this;return a(this,(function(i){return n=window.setInterval((function(){o.collect(r({event_name:"HeartBeat"},e)),o.heartbeatIds.push(n)}),t),[2]}))}))},n.prototype.expose=function(e){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.exposeInstance||(this.exposeInstance=new Vt(this.collect.bind(this))),this.exposeInstance.track(e),[2]}))}))},n.prototype.onPageChange=function(e,t){return i(this,void 0,void 0,(function(){var n=this;return a(this,(function(r){return this.destUrlLock=!0,setTimeout((function(){n.destUrlLock=!1}),100),[2,Promise.all([this.pageLeave({params:e}),this.pageView({params:t})])]}))}))},n.prototype.recordScrollTop=function(){var e=document.documentElement.scrollTop;e>this.maxScrollTop&&(this.maxScrollTop=e)},n.prototype.getMaxHeightParams=function(){var e=document.documentElement||document.body,t=e?((this.maxScrollTop+e.clientHeight)/(null==e?void 0:e.scrollHeight)*100).toFixed(2):0;return{max_height:this.maxScrollTop,max_height_pc:t}},n.prototype.destroy=function(){var e;this.pageViewTime=Date.now(),this.maxScrollTop=0,this.skipOnSessionUpdate=!1,this.beginSessionId="",this.heartbeatIds.forEach((function(e){return clearInterval(e)})),this.heartbeatIds=[],(null===(e=window.SL_Report)||void 0===e?void 0:e.exposeObserver)&&(window.SL_Report.exposeObserver.disconnect(),window.SL_Report.exposeObserver=void 0)},n}(jt));e.SDK_VERSION=Dt,e.baseParams=Lt,e.constants=Ue,e.shopTracker=hn,e.storage=Et,e.tracker=jt,Object.defineProperty(e,"__esModule",{value:!0})}));
